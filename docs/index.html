<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>ðŸš€ Rocket Game - Unity WebGL</title>
    <link rel="shortcut icon" href="TemplateData/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      /* Full-page gradient background */
      html,
      body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
        font-family: "Arial", sans-serif;
        color: #fff;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        overflow: hidden;
      }

      header {
        text-align: center;
        margin-bottom: 20px;
      }

      header h1 {
        font-size: 3em;
        margin: 0;
        color: #ff6f61;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7);
      }

      /* Unity container */
      #unity-container {
        position: relative;
        width: 960px;
        max-width: 95%;
        background: rgba(0, 0, 0, 0.6);
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8);
        overflow: hidden;
      }

      canvas {
        display: block;
        width: 100%;
        height: auto;
        border-radius: 12px;
      }

      /* Loading bar */
      #unity-loading-bar {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 20px;
        background: rgba(255, 255, 255, 0.1);
      }

      #unity-progress-bar-empty {
        width: 90%;
        height: 10px;
        margin: 5px auto;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 5px;
        overflow: hidden;
      }

      #unity-progress-bar-full {
        width: 0%;
        height: 100%;
        background: linear-gradient(90deg, #ff6f61, #ffb86c);
        transition: width 0.3s ease;
      }

      /* Footer with fixed fullscreen button */
      #unity-footer {
        position: absolute;
        bottom: 10px;
        left: 0;
        width: 100%;
        display: flex;
        justify-content: flex-end; /* align items to the right */
        align-items: center;
        padding: 0 20px; /* space from edges */
        gap: 10px; /* space between footer items */
        box-sizing: border-box;
        font-weight: bold;
      }

      #unity-fullscreen-button {
        cursor: pointer;
        padding: 6px 12px;
        border: 2px solid #ff6f61;
        border-radius: 6px;
        background: rgba(255, 255, 255, 0.05);
        transition: all 0.3s;
        flex-shrink: 0; /* prevents shrinking on small screens */
      }

      #unity-fullscreen-button:hover {
        background: rgba(255, 111, 97, 0.9);
        color: #000;
        border-color: #ffb86c;
      }

      /* Mobile adjustments */
      @media (max-width: 1024px) {
        #unity-container {
          width: 100%;
        }
        header h1 {
          font-size: 2em;
        }
      }

      @media (max-width: 600px) {
        #unity-footer {
          justify-content: center; /* center footer on very small screens */
        }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>ðŸš€ Rocket Game</h1>
    </header>

    <div id="unity-container">
      <canvas id="unity-canvas" width="960" height="600" tabindex="-1"></canvas>

      <div id="unity-loading-bar">
        <div id="unity-progress-bar-empty">
          <div id="unity-progress-bar-full"></div>
        </div>
      </div>

      <div id="unity-warning"></div>

      <div id="unity-footer">
        <div>Rocket</div>
        <div id="unity-fullscreen-button">Fullscreen</div>
      </div>
    </div>

    <script>
      const canvas = document.getElementById("unity-canvas");
      const buildUrl = "Build";
      const loaderUrl = "Build/Web.loader.js";

      function unityShowBanner(msg, type) {
        const warningBanner = document.getElementById("unity-warning");
        const div = document.createElement("div");
        div.textContent = msg;
        div.style.padding = "10px";
        div.style.marginTop = "5px";
        div.style.borderRadius = "5px";
        div.style.fontWeight = "bold";
        if (type === "error") div.style.background = "red";
        else div.style.background = "yellow";
        warningBanner.appendChild(div);
        if (type !== "error") setTimeout(() => div.remove(), 5000);
      }

      const config = {
        dataUrl: "Build/Web.data",
        frameworkUrl: "Build/Web.framework.js",
        codeUrl: "Build/Web.wasm",
        streamingAssetsUrl: "StreamingAssets",
        companyName: "DefaultCompany",
        productName: "Rocket",
        productVersion: "0.1.0",
        showBanner: unityShowBanner,
      };

      document.getElementById("unity-loading-bar").style.display = "block";

      const script = document.createElement("script");
      script.src = loaderUrl;
      script.onload = () => {
        createUnityInstance(canvas, config, (progress) => {
          document.getElementById("unity-progress-bar-full").style.width =
            `${progress * 100}%`;
        })
          .then((unityInstance) => {
            document.getElementById("unity-loading-bar").style.display = "none";
            document.getElementById("unity-fullscreen-button").onclick = () =>
              unityInstance.SetFullscreen(1);

            // Responsive canvas resizing
            function resizeCanvas() {
              canvas.width = canvas.clientWidth;
              canvas.height = canvas.clientHeight;
            }
            window.addEventListener("resize", resizeCanvas);
            resizeCanvas();
          })
          .catch(console.error);
      };
      document.body.appendChild(script);
    </script>
  </body>
</html>
